ORG		0x473      		;Адрес начала программы

RESULT:	WORD 0x585  	;Размещаемая строка 0x585

FINISH: WORD 0x0A   	;Стоп-слово
TEMP:  	WORD ?      	;Ячейка для записи первого символа
	
START:  CLA

s1:    	IN 	5    		;Ожидание ввода нечетного символа
		AND #0x40  		;Проверка на наличие символа
		BEQ s1      	;Нет - Спин-луп
		IN 	4    		;Вывод байта в AC
		SWAB			;Перемещаем символ в 1 байт
		ST 	(RESULT)  	;Сохраняем символ в результат
		ST 	TEMP     	;Сохраняем символ в TEMP
		CMP FINISH  	;Проверяем на стоп-символ
		BEQ EXIT  		;Если стоп-символ - выход
		CLA        		

s2:    	IN 	5    		;Ожидание ввода четного символа
		AND #0x40  		;Проверка на наличие введенного символа
		BEQ s2      	;Нет - Спин-луп
		IN 	4    		;Вывод байта в AC
		OR 	TEMP     	;Совмещаем с TEMP символом
		ST 	(RESULT)  	;Сохраняем в память по ссылки
		SUB TEMP  		;Вычитаем TEMP символ
		SWAB    		;Перемещаем четный символ вo 2 байт
		CMP FINISH 		;Проверяем на стоп-символ
		BEQ EXIT  		;Если стоп-символ - выход
		LD 	(RESULT)+  	;Инкрементируем ссылку на результат
		CLA        		
		JUMP s1     	

EXIT:  	LD 	(RESULT)+   ;Инкрементируем ссылку на результат
		HLT
